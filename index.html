<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ðŸŽ¨ Circular Color Picker with Gradient Value & Alpha</title>
<style>
body {
    font-family: 'Segoe UI', sans-serif;
    background-color: #121212;
    color: #f0f0f0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
}

#container {
    background: #1e1e1e;
    padding: 25px 40px;
    border-radius: 15px;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
    text-align: center;
}

h1 { margin-bottom: 20px; font-weight: 500; letter-spacing: 1px; }

#pickerCanvas {
    cursor: crosshair;
    border-radius: 50%;
    margin: 0 auto 15px auto;
    display: block;
    background: #000;
}

#preview {
    width: 120px;
    height: 120px;
    margin: 15px auto;
    border-radius: 50%;
    border: 2px solid #444;
    box-shadow: 0 2px 8px rgba(0,0,0,0.5);
    position: relative;
    overflow: hidden;
    background-color: red;
}

#vecOutput {
    margin-top: 10px;
    font-size: 16px;
    background: #181818;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #333;
    box-shadow: inset 0 0 5px rgba(0,0,0,0.3);
}

button {
    margin: 5px;
    padding: 8px 14px;
    background-color: #2d2d2d;
    color: #f0f0f0;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s ease;
}
button:hover { background-color: #444; transform: scale(1.05); }
.active { background-color: #ff4444; color: #fff; }

input[type="range"] {
    width: 220px;
    margin-top: 10px;
    -webkit-appearance: none;
    appearance: none;
    height: 12px;
    border-radius: 6px;
    outline: none;
    box-sizing: border-box;
    background: linear-gradient(to right, #000, red);
}
input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #fff;
    cursor: pointer;
    border: 2px solid #ff4444;
    margin-top: -4px;
}
input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #fff;
    cursor: pointer;
    border: 2px solid #ff4444;
}
</style>
</head>
<body>
<div id="container">
  <h1>ðŸŽ¨ Circular Color Picker</h1>

  <canvas id="pickerCanvas" width="300" height="300"></canvas>

  <div style="margin-top:15px;">
    <label>Brightness / Value: <span id="valueLabel">1.00</span></label><br>
    <input type="range" id="valueSlider" min="0" max="1" step="0.01" value="1">
  </div>

  <div style="margin-top:20px;">
    <label>Alpha: <span id="alphaValue">1.00</span></label><br>
    <input type="range" id="alphaSlider" min="0" max="1" step="0.01" value="1">
  </div>

  <div style="margin-top: 15px;">
    <button id="prec2" class="active">2 Decimals</button>
    <button id="prec4">4 Decimals</button>
  </div>

  <div style="margin-top: 10px;">
    <button id="showVec3" class="active">vec3</button>
    <button id="showVec4">vec4</button>
  </div>

  <div id="preview"></div>
  <div id="vecOutput">vec3: -, vec4: -</div>
</div>

<script>
const canvas = document.getElementById('pickerCanvas');
const ctx = canvas.getContext('2d');
const radius = canvas.width/2;

const preview = document.getElementById('preview');
const vecOutput = document.getElementById('vecOutput');
const alphaSlider = document.getElementById('alphaSlider');
const alphaValueLabel = document.getElementById('alphaValue');
const valueSlider = document.getElementById('valueSlider');
const valueLabel = document.getElementById('valueLabel');

let precision = 2;
let currentMode = 'vec3';
let hue=0, sat=1, val=1, alpha=1;
let markerPos = [radius, radius];

// HSV -> RGB
function hsvToRgb(h,s,v){
    let c=v*s, x=c*(1-Math.abs((h/60)%2-1)), m=v-c;
    let r=0,g=0,b=0;
    if(h>=0 && h<60){r=c;g=x;b=0;}
    else if(h>=60 && h<120){r=x;g=c;b=0;}
    else if(h>=120 && h<180){r=0;g=c;b=x;}
    else if(h>=180 && h<240){r=0;g=x;b=c;}
    else if(h>=240 && h<300){r=x;g=0;b=c;}
    else {r=c;g=0;b=x;}
    return [Math.round((r+m)*255),Math.round((g+m)*255),Math.round((b+m)*255)];
}

// Draw hue wheel
function drawColorWheel(){
    const image = ctx.createImageData(canvas.width,canvas.height);
    for(let y=-radius;y<radius;y++){
        for(let x=-radius;x<radius;x++){
            const dx=x, dy=y;
            const dist=Math.sqrt(dx*dx+dy*dy);
            if(dist>radius) continue;
            const angle=Math.atan2(dy,dx);
            const hueAt=(angle/(2*Math.PI)+0.5)*360;
            const satAt=dist/radius;
            const rgb=hsvToRgb(hueAt,satAt,1);
            const px=x+radius, py=y+radius;
            const idx=(py*canvas.width+px)*4;
            image.data[idx]=rgb[0];
            image.data[idx+1]=rgb[1];
            image.data[idx+2]=rgb[2];
            image.data[idx+3]=255;
        }
    }
    ctx.putImageData(image,0,0);
}

// Draw wheel + marker
function drawColorWheelWithMarker(){
    drawColorWheel();
    ctx.beginPath();
    ctx.arc(markerPos[0], markerPos[1], 6, 0, 2*Math.PI);
    ctx.strokeStyle = '#fff';
    ctx.lineWidth = 2;
    ctx.stroke();
}

// Pick color from wheel
function pickColor(e){
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left - radius;
    const y = e.clientY - rect.top - radius;
    const dist=Math.sqrt(x*x+y*y);
    if(dist>radius) return;
    const angle=Math.atan2(y,x);
    hue=(angle/(2*Math.PI)+0.5)*360;
    sat=dist/radius;
    markerPos = [x+radius, y+radius];
    updatePreview();
    drawColorWheelWithMarker();
}

// Update preview & vec
function updatePreview(){
    val=parseFloat(valueSlider.value);
    alpha=parseFloat(alphaSlider.value);
    const rgb = hsvToRgb(hue,sat,val);
    preview.style.backgroundColor=`rgba(${rgb[0]},${rgb[1]},${rgb[2]},${alpha})`;
    alphaValueLabel.textContent=alpha.toFixed(precision);
    valueLabel.textContent=val.toFixed(precision);
    const r=(rgb[0]/255).toFixed(precision);
    const g=(rgb[1]/255).toFixed(precision);
    const b=(rgb[2]/255).toFixed(precision);
    const a=alpha.toFixed(precision);
    vecOutput.textContent=currentMode==='vec3'?`vec3: (${r}, ${g}, ${b})`:`vec4: (${r}, ${g}, ${b}, ${a})`;
    // Update gradient of value slider dynamically
    const endColor = hsvToRgb(hue,sat,1);
    valueSlider.style.background = `linear-gradient(to right, #000, rgb(${endColor[0]},${endColor[1]},${endColor[2]}))`;
}

// Events
canvas.addEventListener('mousedown', e=>{
    pickColor(e);
    canvas.addEventListener('mousemove', pickColor);
});
window.addEventListener('mouseup', ()=>canvas.removeEventListener('mousemove', pickColor));
alphaSlider.addEventListener('input',updatePreview);
valueSlider.addEventListener('input',updatePreview);

document.getElementById('prec2').addEventListener('click', ()=>{
    precision=2;
    document.getElementById('prec2').classList.add('active');
    document.getElementById('prec4').classList.remove('active');
    updatePreview();
});
document.getElementById('prec4').addEventListener('click', ()=>{
    precision=4;
    document.getElementById('prec4').classList.add('active');
    document.getElementById('prec2').classList.remove('active');
    updatePreview();
});
document.getElementById('showVec3').addEventListener('click', ()=>{
    currentMode='vec3';
    document.getElementById('showVec3').classList.add('active');
    document.getElementById('showVec4').classList.remove('active');
    updatePreview();
});
document.getElementById('showVec4').addEventListener('click', ()=>{
    currentMode='vec4';
    document.getElementById('showVec4').classList.add('active');
    document.getElementById('showVec3').classList.remove('active');
    updatePreview();
});

// Initial draw
drawColorWheelWithMarker();
updatePreview();
</script>
</body>
</html>
