<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Custom Hue Wheel Color Picker</title>
<style>
body {
    background: #121212;
    color: #fff;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    height: 100vh;
    margin: 0;
    padding-top: 20px;
}

canvas {
    border-radius: 50%;
    cursor: crosshair;
}

.slider-container {
    width: 300px;
    margin-top: 15px;
}

label {
    display: block;
    margin-bottom: 6px;
    font-size: 14px;
}

/* KalÄ±n Brightness Slider */
#valueSlider {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 26px;
    border-radius: 13px;
    background: linear-gradient(to right, black, red);
    outline: none;
}
#valueSlider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #fff;
    cursor: pointer;
    border: 2px solid #000;
    margin-top: 0px;
}
#valueSlider::-moz-range-thumb {
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #fff;
    cursor: pointer;
    border: 2px solid #000;
}

/* Normal Alpha Slider */
#alphaSlider {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 8px;
    border-radius: 4px;
    background: linear-gradient(to right, transparent, currentColor);
    outline: none;
}
#alphaSlider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #fff;
    cursor: pointer;
    border: 2px solid #000;
}
#alphaSlider::-moz-range-thumb {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #fff;
    cursor: pointer;
    border: 2px solid #000;
}

#preview {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 2px solid #444;
    margin-top: 20px;
}

button {
    margin: 5px;
    padding: 6px 12px;
    background: #333;
    border: none;
    border-radius: 6px;
    color: #fff;
    cursor: pointer;
}
button:hover {
    background: #555;
}
.active {
    background: #ff4444;
}

#vecOutput {
    margin-top: 10px;
    background: #1e1e1e;
    padding: 10px;
    border-radius: 6px;
}
</style>
</head>
<body>

<canvas id="pickerCanvas" width="300" height="300"></canvas>

<div class="slider-container">
    <label>Brightness / Value: <span id="valueLabel">1.00</span></label>
    <input type="range" id="valueSlider" min="0" max="1" step="0.01" value="1">
</div>

<div class="slider-container">
    <label>Alpha: <span id="alphaValue">1.00</span></label>
    <input type="range" id="alphaSlider" min="0" max="1" step="0.01" value="1">
</div>

<div>
    <button id="prec2">2 Decimals</button>
    <button id="prec4">4 Decimals</button>
</div>
<div>
    <button id="showVec3" class="active">vec3</button>
    <button id="showVec4">vec4</button>
</div>
<div>
    <button id="copyBtn">Copy to Clipboard</button>
</div>

<div id="vecOutput">vec3: -, vec4: -</div>

<div id="preview"></div>

<script>
const canvas = document.getElementById('pickerCanvas');
const ctx = canvas.getContext('2d');
const radius = canvas.width / 2;
let hue = 0;
let saturation = 1;
let value = 1;
let alpha = 1;
let precision = 2;
let currentMode = 'vec3';
let markerPos = [radius, radius];
const valueSlider = document.getElementById('valueSlider');
const alphaSlider = document.getElementById('alphaSlider');
const valueLabel = document.getElementById('valueLabel');
const alphaValueLabel = document.getElementById('alphaValue');
const preview = document.getElementById('preview');
const vecOutput = document.getElementById('vecOutput');
const prec2 = document.getElementById('prec2');
const prec4 = document.getElementById('prec4');
const showVec3 = document.getElementById('showVec3');
const showVec4 = document.getElementById('showVec4');
const copyBtn = document.getElementById('copyBtn');

function drawColorWheel(){
    const image = ctx.createImageData(canvas.width, canvas.height);
    for(let y=0; y<canvas.height; y++){
        for(let x=0; x<canvas.width; x++){
            const dx = x - radius;
            const dy = y - radius;
            const dist = Math.sqrt(dx*dx + dy*dy);
            if(dist <= radius){
                const angle = Math.atan2(dy, dx);
                let h = (angle * 180 / Math.PI + 360) % 360;
                const s = dist / radius;
                const rgb = hsvToRgb(h, s, 1);
                const index = (y * canvas.width + x) * 4;
                image.data[index] = rgb[0];
                image.data[index+1] = rgb[1];
                image.data[index+2] = rgb[2];
                image.data[index+3] = 255;
            }
        }
    }
    ctx.putImageData(image, 0, 0);
}

function drawMarker(){
    ctx.beginPath();
    ctx.arc(markerPos[0], markerPos[1], 6, 0, Math.PI*2);
    ctx.strokeStyle = '#fff';
    ctx.lineWidth = 2;
    ctx.stroke();
}

function updateValueSliderBackground(){
    const fullColor = `rgb(${hsvToRgb(hue, saturation, 1).join(',')})`;
    valueSlider.style.background = `linear-gradient(to right, black, ${fullColor})`;
}

function pickColor(e){
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left - radius;
    const y = e.clientY - rect.top - radius;
    const dist = Math.sqrt(x*x + y*y);
    if(dist <= radius){
        const angle = Math.atan2(y, x);
        hue = (angle * 180 / Math.PI + 360) % 360;
        saturation = dist / radius;
        markerPos = [x + radius, y + radius];
        updateValueSliderBackground();
        updatePreview();
    }
}

function hsvToRgb(h, s, v){
    let f = (n, k = (n + h/60) % 6) => v - v*s*Math.max(Math.min(k,4-k,1),0);
    return [Math.round(f(5)*255), Math.round(f(3)*255), Math.round(f(1)*255)];
}

function updatePreview(){
    const rgb = hsvToRgb(hue, saturation, value);
    preview.style.backgroundColor = `rgba(${rgb[0]},${rgb[1]},${rgb[2]},${alpha})`;
    const r = (rgb[0]/255).toFixed(precision);
    const g = (rgb[1]/255).toFixed(precision);
    const b = (rgb[2]/255).toFixed(precision);
    const a = alpha.toFixed(precision);
    const vec3Text = `vec3: (${r}, ${g}, ${b})`;
    const vec4Text = `vec4: (${r}, ${g}, ${b}, ${a})`;
    vecOutput.textContent = currentMode === 'vec3' ? vec3Text : vec4Text;
    drawColorWheel();
    drawMarker();
}

valueSlider.addEventListener('input', () => {
    value = parseFloat(valueSlider.value);
    valueLabel.textContent = value.toFixed(2);
    updatePreview();
});

alphaSlider.addEventListener('input', () => {
    alpha = parseFloat(alphaSlider.value);
    alphaValueLabel.textContent = alpha.toFixed(2);
    updatePreview();
});

prec2.addEventListener('click', () => { precision = 2; updatePreview(); });
prec4.addEventListener('click', () => { precision = 4; updatePreview(); });
showVec3.addEventListener('click', () => { currentMode = 'vec3'; showVec3.classList.add('active'); showVec4.classList.remove('active'); updatePreview(); });
showVec4.addEventListener('click', () => { currentMode = 'vec4'; showVec4.classList.add('active'); showVec3.classList.remove('active'); updatePreview(); });

copyBtn.addEventListener('click', () => {
    navigator.clipboard.writeText(vecOutput.textContent).then(() => {
        copyBtn.textContent = "Copied!";
        setTimeout(() => copyBtn.textContent = "Copy to Clipboard", 1500);
    });
});

canvas.addEventListener('mousedown', (e) => {
    pickColor(e);
    window.addEventListener('mousemove', pickColor);
});
window.addEventListener('mouseup', () => {
    window.removeEventListener('mousemove', pickColor);
});

updateValueSliderBackground();
drawColorWheel();
drawMarker();
updatePreview();
</script>
</body>
</html>
